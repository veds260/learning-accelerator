<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Lesson - Learning Accelerator</title>
  <link rel="stylesheet" href="lesson-detail.css">
  <link rel="icon" href="data:;base64,iVBORw0KGgo=">
  
  <!-- Monaco Editor -->
  <link rel="stylesheet" data-name="vs/editor/editor.main" href="https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.45.0/min/vs/editor/editor.main.min.css">
  
  <!-- Pyodide -->
  <script src="https://cdn.jsdelivr.net/pyodide/v0.25.0/full/pyodide.js"></script>
</head>
<body>
  <nav class="nav">
    <div class="nav-brand">
      <span class="logo">ğŸ’</span>
      <span class="brand-text">Learning Accelerator</span>
    </div>
    <div class="nav-menu">
      <a href="index.html" class="nav-link">Dashboard</a>
      <a href="lessons.html" class="nav-link active">Lessons</a>
      <a href="code-playground.html" class="nav-link">Code Playground</a>
    </div>
  </nav>

  <div class="container">
    <!-- Lesson Header -->
    <div class="lesson-header">
      <button onclick="window.location.href='lessons.html'" class="btn-back">â† Back to Lessons</button>
      <div id="lesson-title-section">
        <h1 id="lesson-title">Loading...</h1>
        <p id="lesson-subtitle"></p>
      </div>
    </div>

    <!-- Progress Bar -->
    <div class="lesson-progress-bar">
      <div class="progress-step active" data-step="1">
        <div class="step-number">1</div>
        <div class="step-label">Learn</div>
      </div>
      <div class="progress-step" data-step="2">
        <div class="step-number">2</div>
        <div class="step-label">Quiz</div>
      </div>
      <div class="progress-step" data-step="3">
        <div class="step-number">3</div>
        <div class="step-label">Code</div>
      </div>
      <div class="progress-step" data-step="4">
        <div class="step-number">4</div>
        <div class="step-label">Complete</div>
      </div>
    </div>

    <!-- Step 1: Learn Content -->
    <div id="step-learn" class="lesson-step active">
      <div class="lesson-content">
        <div id="story-section" class="content-section">
          <h2>ğŸ“– Story</h2>
          <div id="story-text"></div>
        </div>

        <div id="concept-section" class="content-section">
          <h2>ğŸ’¡ Core Concept</h2>
          <div id="concept-text"></div>
        </div>

        <div id="analogy-section" class="content-section">
          <h2>ğŸ¯ Analogy</h2>
          <div id="analogy-text"></div>
        </div>

        <div id="visual-section" class="content-section">
          <h2>ğŸ“Š Visual</h2>
          <pre id="visual-diagram"></pre>
        </div>

        <div id="keypoints-section" class="content-section">
          <h2>ğŸ”‘ Key Points</h2>
          <ul id="keypoints-list"></ul>
        </div>

        <div id="realworld-section" class="content-section">
          <h2>ğŸŒ Real-World Applications</h2>
          <ul id="realworld-list"></ul>
        </div>

        <div id="easteregg-section" class="content-section">
          <h2>ğŸ¥š Easter Egg</h2>
          <div id="easteregg-text"></div>
        </div>
      </div>

      <div class="step-actions">
        <button class="btn primary large" onclick="nextStep()">Continue to Quiz â†’</button>
      </div>
    </div>

    <!-- Step 2: Quiz -->
    <div id="step-quiz" class="lesson-step">
      <h2>ğŸ“ Test Your Knowledge</h2>
      <div id="quiz-container">
        <!-- Quiz questions loaded here -->
        <!-- Auto-advances after completion -->
      </div>
    </div>

    <!-- Step 3: Code Exercise -->
    <div id="step-code" class="lesson-step">
      <h2>ğŸ’» Hands-On Coding</h2>
      
      <div class="code-exercise-container">
        <div class="instructions-panel">
          <h3>ğŸ“ Instructions</h3>
          <p id="code-instructions"></p>
          
          <div id="hints-section" style="margin-top: 1rem;">
            <button id="show-hint-btn" class="btn secondary">ğŸ’¡ Show Hint</button>
            <div id="hint-display" style="display: none; margin-top: 0.5rem; padding: 1rem; background: var(--bg-secondary); border-radius: 8px;"></div>
          </div>
        </div>
        
        <div class="editor-panel">
          <div class="editor-header">
            <span class="editor-label">ğŸ Python</span>
            <div class="editor-controls">
              <button id="reset-code-btn" class="btn secondary btn-sm">â†º Reset</button>
              <button id="run-code-btn" class="btn primary btn-sm">â–¶ Run Code</button>
            </div>
          </div>
          
          <div id="code-editor" style="height: 400px; border: 1px solid var(--border);"></div>
          
          <div class="console-panel">
            <div class="console-header">
              <span>Console Output</span>
              <button id="clear-console-btn" class="btn-clear">Clear</button>
            </div>
            <div id="console-output"></div>
          </div>
        </div>
      </div>

      <div class="step-actions">
        <button class="btn primary large" onclick="completeLesson()">Complete Lesson â†’</button>
      </div>
    </div>

    <!-- Step 4: Completion -->
    <div id="step-complete" class="lesson-step">
      <div class="completion-card">
        <div class="completion-icon">ğŸ‰</div>
        <h2>Lesson Complete!</h2>
        <p>You've earned <strong>+100 XP</strong></p>
        <div id="completion-badge"></div>
        
        <div class="completion-actions">
          <button class="btn primary" onclick="window.location.href='lessons.html'">Back to Lessons</button>
          <button class="btn secondary" onclick="nextLesson()">Next Lesson â†’</button>
        </div>
      </div>
    </div>
  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.45.0/min/vs/loader.min.js"></script>
  <script src="lesson-detail.js"></script>
</body>
</html>
